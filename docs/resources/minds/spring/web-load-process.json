{"root":{"data":{"text":"web.xml加载过程","note":"- 一个web中可以没有web.xml文件，也就是说，web.xml文件并不是web工程必须的。web.xml文件是用来初始化配置信息：比如Welcome页面、servlet、servlet-mapping、filter、listener、启动加载级别等。当你的web工程没用到这些时，你可以不用web.xml文件来配置你的Application。\n\n\n- 当要启动某个web项目时，服务器软件或容器如（tomcat）会第一步加载项目中的web.xml文件，通过其中的各种配置来启动项目，只有其中配置的各项均无误时，项目才能正确启动。web.xml有多项标签，在其加载的过程中顺序依次为：context-param >> listener >> fileter >> servlet​。（同类多个节点以出现顺序依次加载）","hyperlink":"https://www.jianshu.com/p/7c4bbf1ba998","hyperlinkTitle":""},"children":[{"data":{"text":"启动WEB项目的时候，容器首先会去它的配置文件web.xml读取两个节点: <listener></listener>和<context-param></context-param>。","priority":1,"layout":null},"children":[]},{"data":{"text":"紧接着，容器创建一个ServletContext（application），这个WEB项目所有部分都将共享这个上下文。","priority":2,"layout":null},"children":[]},{"data":{"text":"容器以<context-param></context-param>的name作为键，value作为值，将其转化为键值对，存入ServletContext。","priority":3,"layout":null},"children":[]},{"data":{"text":"容器创建<listener></listener>中的类实例，根据配置的class类路径<listener-class>来创建监听，在监听中会有contextInitialized(ServletContextEvent args)初始化方法，启动Web应用时，系统调用Listener的该方法，在这个方法中获得：\r\nServletContext application =ServletContextEvent.getServletContext();\r\ncontext-param的值= application.getInitParameter(\"context-param的键\");\r\n得到这个context-param的值之后，你就可以做一些操作了。","priority":4,"layout":null},"children":[]},{"data":{"text":"举例：你可能想在项目启动之前就打开数据库，那么这里就可以在<context-param>中设置数据库的连接方式（驱动、url、user、password），在监听类中初始化数据库的连接。\n这个监听是自己写的一个类，除了初始化方法，它还有销毁方法，用于关闭应用前释放资源。\n比如:说数据库连接的关闭，此时，调用contextDestroyed(ServletContextEvent args)，关闭Web应用时，系统调用Listener的该方法。","layout":null},"children":[]},{"data":{"text":"接着，容器会读取<filter></filter>，根据指定的类路径来实例化过滤器。","priority":5,"layout":null},"children":[]}]},"template":"right","theme":"fresh-blue","version":"1.4.43"}