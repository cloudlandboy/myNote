{"root":{"data":{"text":"动态 SQL","expandState":"expand","hyperlink":"https://mybatis.org/mybatis-3/zh/dynamic-sql.html","hyperlinkTitle":""},"children":[{"data":{"text":"if","expandState":"collapse"},"children":[{"data":{"text":"概念","expandState":"collapse"},"children":[{"data":{"text":"做条件判断的，如果我们不使用这个标签，我们肯定会在代码中判断如查询的元素是否为空，传入的元素是否为空，而这时我们直接使用这个标签，就减少了代码的书写"},"children":[]},{"data":{"text":"动态 SQL 通常要做的事情是有条件地包含 where 子句的一部分"},"children":[]}]},{"data":{"text":"例子","expandState":"collapse"},"children":[{"data":{"text":"<select id=\"findActiveBlogWithTitleLike\" resultType=\"Blog\">\r\n  SELECT * FROM BLOG  WHERE state = ‘ACTIVE’ \r\n  <if test=\"title != null\">\r\n    AND title like #{title}\r\n  </if>\r\n</select>","background":"#c7edcc"},"children":[]},{"data":{"text":"如果没有传入“title”，那么所有处于“ACTIVE”状态的BLOG都会返回；反之若传入了“title”，那么就会把模糊查找“title”内容的BLOG结果返回"},"children":[]}]}]},{"data":{"text":"choose (when, otherwise)","expandState":"collapse"},"children":[{"data":{"text":"概念","expandState":"collapse"},"children":[{"data":{"text":"对于这类标签，就是采用多个选项中找一个，就像单项选择题，但是你不会都选择，只会从中选择1个来作为条件。就有点类似于switch。。case。"},"children":[]}]},{"data":{"text":"例子","expandState":"collapse"},"children":[{"data":{"text":"<select id=\"findActiveBlogLike\" resultType=\"Blog\">\r\n  SELECT * FROM BLOG WHERE state = ‘ACTIVE’\r\n  <choose>\r\n    <when test=\"title != null\">\r\n      AND title like #{title}\r\n    </when>\r\n    <when test=\"author != null and author.name != null\">\r\n      AND author_name like #{author.name}\r\n    </when>\r\n    <otherwise>\r\n      AND featured = 1\r\n    </otherwise>\r\n  </choose>\r\n</select>","background":"#c7edcc"},"children":[]}]}]},{"data":{"text":"trim (where, set)","expandState":"collapse"},"children":[{"data":{"text":"概念","expandState":"collapse"},"children":[{"data":{"text":"如果使用第一个if语句的话，就会发现没有写where标签就会报错。而这类标签通常是搭配条件标签使用的。"},"children":[]}]},{"data":{"text":"where一般可以用1=1来解决"},"children":[]}]},{"data":{"text":"foreach","expandState":"collapse"},"children":[{"data":{"text":"概念","expandState":"collapse"},"children":[{"data":{"text":"毫无疑问这个标签肯定是用于循环了，用于遍历，如果我们传入的参数是一个数组或者集合类，那么这个标签可以循环遍历。一般我们都是使用sql中的in语句时才使用。"},"children":[]}]},{"data":{"text":"例子","expandState":"collapse"},"children":[{"data":{"text":"<select id=\"selectPostIn\" resultType=\"domain.blog.Post\">\r\n  SELECT * FROM POST P WHERE ID in\r\n  <foreach item=\"item\" index=\"index\" collection=\"list\"\r\n      open=\"(\" separator=\",\" close=\")\">\r\n        #{item}\r\n  </foreach>\r\n</select>"},"children":[]}]},{"data":{"text":"注意","expandState":"collapse"},"children":[{"data":{"text":"你可以将任何可迭代对象（如列表、集合等）和任何的字典或者数组对象传递给foreach作为集合参数"},"children":[]},{"data":{"text":"当使用可迭代对象或者数组时，index是当前迭代的次数，item的值是本次迭代获取的元素。"},"children":[]}]}]}]},"template":"default","theme":"fresh-blue","version":"1.4.43"}