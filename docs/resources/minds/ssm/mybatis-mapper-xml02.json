{"root":{"data":{"text":"mapper的xml文件（二）","expandState":"expand","note":null},"children":[{"data":{"text":"增删改实例语句","expandState":"collapse","layout":null},"children":[{"data":{"text":"<insert id=\"insertAuthor\">\n\tinsert into Author (id,username,password,email,bio)\n  values (#{id},#{username},#{password},#{email},#{bio})\n</insert>","background":"#c7edcc","layout":null},"children":[]},{"data":{"text":"<update id=\"updateAuthor\">\r\n  update Author set\r\n    username = #{username},\r\n    password = #{password},\r\n    email = #{email},\r\n    bio = #{bio}\r\n  where id = #{id}\r\n</update>","background":"#c7edcc","layout":null},"children":[]},{"data":{"text":"<delete id=\"deleteAuthor\">\r\n  delete from Author where id = #{id}\r\n</delete>","background":"#c7edcc","layout":null},"children":[]}]},{"data":{"text":"关于主键的生成","expandState":"collapse","layout":null},"children":[{"data":{"text":"概念","note":"通常主键的生成都是让数据库自动生成的，比如mysql中主键设置auto_increment，主流的数据库一般都支持，当然也有其他不支持的。。。","layout":null},"children":[]},{"data":{"text":"分类","expandState":"collapse","layout":null},"children":[{"data":{"text":"数据库支持自动生成主键","expandState":"collapse","layout":null},"children":[{"data":{"text":"方法","expandState":"collapse","layout":null},"children":[{"data":{"text":"可以设置 useGeneratedKeys=”true”，然后再把 keyProperty 设置到目标属性上就OK了","layout":null},"children":[]}]},{"data":{"text":"实例","expandState":"collapse","layout":null},"children":[{"data":{"text":"<insert id=\"insertAuthor\" useGeneratedKeys=\"true\"\r\n    keyProperty=\"id\">\r\n  insert into Author (username,password,email,bio)\r\n  values (#{username},#{password},#{email},#{bio})\r\n</insert>","background":"#c7edcc","layout":null},"children":[]},{"data":{"text":"<insert id=\"insertAuthor\" useGeneratedKeys=\"true\"\r\n    keyProperty=\"id\">\r\n  insert into Author (username, password, email, bio) values\r\n  <foreach item=\"item\" collection=\"list\" separator=\",\">\r\n    (#{item.username}, #{item.password}, #{item.email}, #{item.bio})\r\n  </foreach>\r\n</insert>","background":"#c7edcc","layout":null},"children":[]}]}]},{"data":{"text":"数据库不支持自动生成主键","expandState":"collapse","layout":null},"children":[{"data":{"text":"方法","expandState":"collapse","layout":null},"children":[{"data":{"text":"在insert中使用selectKey语句","layout":null},"children":[]},{"data":{"text":"<selectKey  keyProperty=\"id\"  resultType=\"int\"  order=\"BEFORE\"  statementType=\"PREPARED\">","layout":null},"children":[]}]},{"data":{"text":"愚蠢例子","expandState":"collapse","layout":null},"children":[{"data":{"id":"bzttgj8iugo0","created":1578832634298,"text":" ","image":"https://i.postimg.cc/tRSMH0Gx/20200112203640.png","imageTitle":"20200112203640.png","imageSize":{"width":200,"height":53},"layout":null},"children":[]},{"data":{"text":"随机生成一个 ID做为主键","layout":null},"children":[]},{"data":{"id":"bzttji09yps0","created":1578832866715,"text":"对于不支持自动生成类型的数据库或可能不支持自动生成主键 JDBC 驱动来说，MyBatis 有另外一种方法来生成主键。\n这里有一个简单（甚至很傻）的示例，它可以生成一个随机 ID（你最好不要这么做，但这里展示了 MyBatis 处理问题的灵活性及其所关心的广度）","layout":null},"children":[]},{"data":{"text":"在上面的示例中，selectKey 元素将会首先运行，Author 的 id 会被设置，然后插入语句会被调用。\n这给你了一个和数据库中来处理自动生成的主键类似的行为，避免了使 Java 代码变得复杂","layout":null},"children":[]}]}]}]}]}]},"template":"default","theme":"fresh-blue","version":"1.4.43"}